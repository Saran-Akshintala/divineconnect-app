<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DivineConnect - Spiritual Services</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.2rem;
            opacity: 0.9;
        }

        .auth-section, .main-content {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .hidden {
            display: none;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #333;
        }

        .form-group input, .form-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid #e1e5e9;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
        }

        .form-group input:focus, .form-group select:focus {
            outline: none;
            border-color: #667eea;
        }

        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .btn:hover {
            transform: translateY(-2px);
        }

        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .poojari-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .poojari-card {
            border: 2px solid #e1e5e9;
            border-radius: 12px;
            padding: 20px;
            transition: all 0.3s;
            cursor: pointer;
        }

        .poojari-card:hover {
            border-color: #667eea;
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }

        .poojari-card h3 {
            color: #333;
            margin-bottom: 10px;
            font-size: 1.3rem;
        }

        .poojari-card p {
            color: #666;
            margin-bottom: 8px;
        }

        .rating {
            color: #ffa500;
            font-weight: bold;
        }

        .search-filters {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .status-message {
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            font-weight: 500;
        }

        .success {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .error {
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        .info {
            background-color: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }

        .nav-tabs {
            display: flex;
            margin-bottom: 20px;
            border-bottom: 2px solid #e1e5e9;
        }

        .nav-tab {
            padding: 12px 24px;
            background: none;
            border: none;
            font-size: 16px;
            font-weight: 600;
            color: #666;
            cursor: pointer;
            border-bottom: 3px solid transparent;
            transition: all 0.3s;
        }

        .nav-tab.active {
            color: #667eea;
            border-bottom-color: #667eea;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .booking-form {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }

        .full-width {
            grid-column: 1 / -1;
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .search-filters {
                grid-template-columns: 1fr;
            }
            
            .booking-form {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üïâÔ∏è DivineConnect</h1>
            <p>Connect with Verified Poojaris for Your Spiritual Needs</p>
        </div>

        <!-- Authentication Section -->
        <div id="auth-section" class="auth-section">
            <h2>Welcome to DivineConnect</h2>
            <p style="margin-bottom: 20px; color: #666;">Browse our services or login for personalized experience</p>
            
            <div style="display: flex; gap: 15px; margin-bottom: 20px;">
                <button class="btn" onclick="browseAsGuest()" style="background: #28a745;">Browse as Guest</button>
                <button class="btn" onclick="showLoginForm()">Login</button>
            </div>
            
            <div id="login-form" class="hidden">
                <div class="form-group">
                    <label for="phone">Phone Number</label>
                    <input type="tel" id="phone" placeholder="Enter your phone number" value="9876543210">
                </div>
                <button class="btn" onclick="sendOTP()">Send OTP</button>
            </div>
            
            <div id="otp-form" class="hidden">
                <div class="form-group">
                    <label for="otp">Enter OTP</label>
                    <input type="text" id="otp" placeholder="Enter 6-digit OTP" value="123456">
                </div>
                <button class="btn" onclick="verifyOTP()">Verify & Login</button>
            </div>
        </div>

        <!-- Main Application -->
        <div id="main-content" class="main-content hidden">
            <div class="nav-tabs">
                <button class="nav-tab active" onclick="showTab('home')">Home</button>
                <button class="nav-tab" onclick="showTab('bookings')">My Bookings</button>
                <button class="nav-tab" onclick="showTab('profile')">Profile</button>
                <button class="nav-tab" onclick="showTab('reviews')">Reviews</button>
                <button id="auth-button" class="nav-tab" onclick="logout()" style="margin-left: auto;">Logout</button>
            </div>

            <!-- Home Tab -->
            <div id="home-tab" class="tab-content active">
                <h2>Find Your Perfect Poojari</h2>
                
                <div class="search-filters">
                    <div class="form-group">
                        <label for="search">Search</label>
                        <input type="text" id="search" placeholder="Search by name or specialization">
                    </div>
                    <div class="form-group">
                        <label for="city">City</label>
                        <select id="city">
                            <option value="">All Cities</option>
                            <option value="Mumbai">Mumbai</option>
                            <option value="Delhi">Delhi</option>
                            <option value="Bangalore">Bangalore</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="language">Language</label>
                        <select id="language">
                            <option value="">All Languages</option>
                            <option value="Hindi">Hindi</option>
                            <option value="English">English</option>
                            <option value="Sanskrit">Sanskrit</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>&nbsp;</label>
                        <button class="btn" onclick="searchPoojaris()">Search</button>
                    </div>
                </div>

                <div id="poojaris-container" class="poojari-grid">
                    <!-- Poojaris will be loaded here -->
                </div>
            </div>

            <!-- Bookings Tab -->
            <div id="bookings-tab" class="tab-content">
                <h2>My Bookings</h2>
                <div id="bookings-container">
                    <!-- Bookings will be loaded here -->
                </div>
            </div>

            <!-- Profile Tab -->
            <div id="profile-tab" class="tab-content">
                <h2>My Profile</h2>
                <div id="profile-container">
                    <!-- Profile will be loaded here -->
                </div>
            </div>

            <!-- Reviews Tab -->
            <div id="reviews-tab" class="tab-content">
                <h2>Reviews & Ratings</h2>
                <div id="reviews-container">
                    <!-- Reviews will be loaded here -->
                </div>
            </div>
        </div>

        <!-- Status Messages -->
        <div id="status-message" class="status-message hidden"></div>
    </div>

    <!-- Booking Modal -->
    <div id="booking-modal" class="hidden" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1000; display: none; align-items: center; justify-content: center;">
        <div style="background: white; padding: 30px; border-radius: 15px; max-width: 600px; width: 90%; max-height: 80vh; overflow-y: auto;">
            <h3>Book Pooja Service</h3>
            <div class="booking-form">
                <div class="form-group">
                    <label for="booking-date">Date</label>
                    <input type="date" id="booking-date">
                </div>
                <div class="form-group">
                    <label for="booking-time">Time</label>
                    <input type="time" id="booking-time">
                </div>
                <div class="form-group full-width">
                    <label for="booking-address">Address</label>
                    <textarea id="booking-address" rows="3" placeholder="Enter your address"></textarea>
                </div>
                <div class="form-group full-width">
                    <label for="booking-notes">Special Requirements</label>
                    <textarea id="booking-notes" rows="3" placeholder="Any special requirements or notes"></textarea>
                </div>
            </div>
            <div style="margin-top: 20px; text-align: right;">
                <button class="btn" onclick="closeBookingModal()" style="background: #6c757d; margin-right: 10px;">Cancel</button>
                <button class="btn" onclick="confirmBooking()">Confirm Booking</button>
            </div>
        </div>
    </div>

    <script>
        const API_BASE = 'http://localhost:5000/api/v1';
        let authToken = localStorage.getItem('authToken');
        let currentUser = null;
        let selectedPoojari = null;
        let isGuestMode = false;

        // Mock data for guest browsing
        const mockPoojaris = [
            {
                id: 1,
                name: "Pandit Rajesh Sharma",
                specialization: "Vedic Rituals, Griha Pravesh",
                experience: 15,
                city: "Mumbai",
                languages: "Hindi, Sanskrit, English",
                rating: 4.8,
                totalReviews: 127,
                priceRange: "2000-5000",
                description: "Expert in traditional Vedic ceremonies with 15+ years experience",
                availability: "Available Mon-Sat, 6 AM - 8 PM"
            },
            {
                id: 2,
                name: "Acharya Suresh Pandey",
                specialization: "Marriage Ceremonies, Havan",
                experience: 20,
                city: "Delhi",
                languages: "Hindi, Sanskrit",
                rating: 4.9,
                totalReviews: 203,
                priceRange: "3000-8000",
                description: "Specialized in wedding ceremonies and sacred fire rituals",
                availability: "Available daily, 5 AM - 9 PM"
            },
            {
                id: 3,
                name: "Pandit Mohan Joshi",
                specialization: "Puja Services, Astrology",
                experience: 12,
                city: "Bangalore",
                languages: "Hindi, Kannada, English",
                rating: 4.7,
                totalReviews: 89,
                priceRange: "1500-4000",
                description: "Traditional puja services with astrological consultation",
                availability: "Available Tue-Sun, 7 AM - 7 PM"
            }
        ];

        const mockBookings = [
            {
                id: 1001,
                poojariName: "Pandit Rajesh Sharma",
                serviceType: "Griha Pravesh Puja",
                date: "2025-09-20",
                time: "10:00 AM",
                status: "confirmed",
                amount: 3500,
                address: "123 Green Valley, Mumbai"
            },
            {
                id: 1002,
                poojariName: "Acharya Suresh Pandey",
                serviceType: "Satyanarayan Puja",
                date: "2025-09-15",
                time: "6:00 PM",
                status: "completed",
                amount: 2500,
                address: "456 Park Street, Delhi"
            },
            {
                id: 1003,
                poojariName: "Pandit Mohan Joshi",
                serviceType: "Ganesh Puja",
                date: "2025-09-25",
                time: "11:00 AM",
                status: "pending",
                amount: 2000,
                address: "789 Tech City, Bangalore"
            }
        ];

        const mockReviews = [
            {
                id: 1,
                poojariName: "Pandit Rajesh Sharma",
                rating: 5,
                comment: "Excellent service! Very knowledgeable and performed the ceremony beautifully.",
                date: "2025-09-10",
                serviceType: "Griha Pravesh"
            },
            {
                id: 2,
                poojariName: "Acharya Suresh Pandey",
                rating: 5,
                comment: "Amazing experience. The wedding ceremony was conducted perfectly.",
                date: "2025-09-08",
                serviceType: "Marriage Ceremony"
            },
            {
                id: 3,
                poojariName: "Pandit Mohan Joshi",
                rating: 4,
                comment: "Good service, punctual and professional. Recommended!",
                date: "2025-09-05",
                serviceType: "Ganesh Puja"
            }
        ];

        const mockProfile = {
            name: "Guest User",
            phoneNumber: "+91-XXXXXXXXXX",
            email: "guest@divineconnect.com",
            createdAt: "2025-01-01",
            totalBookings: 3,
            membershipType: "Guest"
        };

        // Initialize app
        document.addEventListener('DOMContentLoaded', function() {
            if (authToken) {
                showMainContent();
                loadPoojaris();
            }
        });

        function showMessage(message, type = 'info') {
            const messageEl = document.getElementById('status-message');
            messageEl.textContent = message;
            messageEl.className = `status-message ${type}`;
            messageEl.classList.remove('hidden');
            setTimeout(() => messageEl.classList.add('hidden'), 5000);
        }

        function browseAsGuest() {
            isGuestMode = true;
            showMainContent();
            loadPoojaris();
            updateAuthButton();
            showMessage('Browsing as guest - Login for personalized features', 'info');
        }

        function showLoginForm() {
            document.getElementById('login-form').classList.remove('hidden');
        }

        function updateAuthButton() {
            const authButton = document.getElementById('auth-button');
            if (isGuestMode) {
                authButton.textContent = 'Login';
                authButton.onclick = () => {
                    isGuestMode = false;
                    document.getElementById('auth-section').classList.remove('hidden');
                    document.getElementById('main-content').classList.add('hidden');
                };
            } else {
                authButton.textContent = 'Logout';
                authButton.onclick = logout;
            }
        }

        async function sendOTP() {
            const phone = document.getElementById('phone').value;
            if (!phone) {
                showMessage('Please enter phone number', 'error');
                return;
            }

            try {
                const response = await fetch(`${API_BASE}/auth/login`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ phoneNumber: `+91${phone}` })
                });

                const data = await response.json();
                if (data.success) {
                    document.getElementById('login-form').classList.add('hidden');
                    document.getElementById('otp-form').classList.remove('hidden');
                    showMessage('OTP sent successfully! Use 123456 for testing', 'success');
                } else {
                    showMessage(data.message || 'Failed to send OTP', 'error');
                }
            } catch (error) {
                showMessage('Network error. Please try again.', 'error');
            }
        }

        async function verifyOTP() {
            const phone = document.getElementById('phone').value;
            const otp = document.getElementById('otp').value;

            if (!otp) {
                showMessage('Please enter OTP', 'error');
                return;
            }

            try {
                const response = await fetch(`${API_BASE}/auth/verify`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ 
                        phoneNumber: `+91${phone}`,
                        otp: otp
                    })
                });

                const data = await response.json();
                if (data.success) {
                    authToken = data.token;
                    currentUser = data.user;
                    localStorage.setItem('authToken', authToken);
                    showMainContent();
                    loadPoojaris();
                    showMessage('Login successful!', 'success');
                } else {
                    showMessage(data.message || 'Invalid OTP', 'error');
                }
            } catch (error) {
                showMessage('Network error. Please try again.', 'error');
            }
        }

        function showMainContent() {
            document.getElementById('auth-section').classList.add('hidden');
            document.getElementById('main-content').classList.remove('hidden');
        }

        function logout() {
            authToken = null;
            currentUser = null;
            localStorage.removeItem('authToken');
            document.getElementById('auth-section').classList.remove('hidden');
            document.getElementById('main-content').classList.add('hidden');
            document.getElementById('login-form').classList.remove('hidden');
            document.getElementById('otp-form').classList.add('hidden');
            showMessage('Logged out successfully', 'info');
        }

        function showTab(tabName) {
            // Hide all tabs
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.nav-tab').forEach(tab => {
                tab.classList.remove('active');
            });

            // Show selected tab
            document.getElementById(`${tabName}-tab`).classList.add('active');
            event.target.classList.add('active');

            // Load content based on tab
            if (tabName === 'home') {
                loadPoojaris();
            } else if (tabName === 'bookings') {
                loadBookings();
            } else if (tabName === 'profile') {
                loadProfile();
            } else if (tabName === 'reviews') {
                loadReviews();
            }
        }

        async function loadPoojaris() {
            if (isGuestMode) {
                displayPoojaris(mockPoojaris);
                return;
            }

            try {
                const response = await fetch(`${API_BASE}/poojaris`);
                const data = await response.json();
                
                if (data.success) {
                    displayPoojaris(data.data);
                } else {
                    showMessage('Failed to load poojaris', 'error');
                }
            } catch (error) {
                displayPoojaris(mockPoojaris);
                showMessage('Using demo data - Backend not available', 'info');
            }
        }

        function displayPoojaris(poojaris) {
            const container = document.getElementById('poojaris-container');
            container.innerHTML = poojaris.map(poojari => `
                <div class="poojari-card" onclick="openBookingModal(${poojari.id})">
                    <h3>${poojari.name}</h3>
                    <p><strong>Specialization:</strong> ${poojari.specialization}</p>
                    <p><strong>Experience:</strong> ${poojari.experience} years</p>
                    <p><strong>Location:</strong> ${poojari.city}</p>
                    <p><strong>Languages:</strong> ${poojari.languages}</p>
                    <p class="rating"><strong>Rating:</strong> ‚≠ê ${poojari.rating}/5 (${poojari.totalReviews} reviews)</p>
                    <p><strong>Price:</strong> ‚Çπ${poojari.priceRange}</p>
                    <p style="margin-top: 10px; color: #667eea; font-weight: 600;">Click to Book</p>
                </div>
            `).join('');
        }

        async function searchPoojaris() {
            const search = document.getElementById('search').value;
            const city = document.getElementById('city').value;
            const language = document.getElementById('language').value;

            const params = new URLSearchParams();
            if (search) params.append('search', search);
            if (city) params.append('city', city);
            if (language) params.append('language', language);

            try {
                const response = await fetch(`${API_BASE}/poojaris?${params}`);
                const data = await response.json();
                
                if (data.success) {
                    displayPoojaris(data.data);
                } else {
                    showMessage('No poojaris found', 'info');
                }
            } catch (error) {
                showMessage('Search failed', 'error');
            }
        }

        function openBookingModal(poojariId) {
            selectedPoojari = poojariId;
            const modal = document.getElementById('booking-modal');
            modal.classList.remove('hidden');
            modal.style.display = 'flex';
            
            // Set default date to tomorrow
            const tomorrow = new Date();
            tomorrow.setDate(tomorrow.getDate() + 1);
            document.getElementById('booking-date').value = tomorrow.toISOString().split('T')[0];
            document.getElementById('booking-time').value = '10:00';
        }

        function closeBookingModal() {
            const modal = document.getElementById('booking-modal');
            modal.classList.add('hidden');
            modal.style.display = 'none';
            selectedPoojari = null;
        }

        async function confirmBooking() {
            if (!authToken) {
                showMessage('Please login first', 'error');
                return;
            }

            const bookingData = {
                poojariId: selectedPoojari,
                serviceType: 'General Pooja',
                date: document.getElementById('booking-date').value,
                time: document.getElementById('booking-time').value,
                address: document.getElementById('booking-address').value,
                notes: document.getElementById('booking-notes').value
            };

            try {
                const response = await fetch(`${API_BASE}/bookings`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${authToken}`
                    },
                    body: JSON.stringify(bookingData)
                });

                const data = await response.json();
                if (data.success) {
                    closeBookingModal();
                    showMessage('Booking created successfully!', 'success');
                    showTab('bookings');
                } else {
                    showMessage(data.message || 'Booking failed', 'error');
                }
            } catch (error) {
                showMessage('Network error during booking', 'error');
            }
        }

        async function loadBookings() {
            if (isGuestMode) {
                displayBookings(mockBookings);
                return;
            }

            if (!authToken) {
                displayBookings(mockBookings);
                showMessage('Login to view your actual bookings', 'info');
                return;
            }

            try {
                const response = await fetch(`${API_BASE}/bookings`, {
                    headers: { 'Authorization': `Bearer ${authToken}` }
                });

                const data = await response.json();
                if (data.success) {
                    displayBookings(data.data);
                } else {
                    displayBookings(mockBookings);
                    showMessage('Using demo bookings', 'info');
                }
            } catch (error) {
                displayBookings(mockBookings);
                showMessage('Using demo bookings - Backend not available', 'info');
            }
        }

        function displayBookings(bookings) {
            const container = document.getElementById('bookings-container');
            if (bookings.length === 0) {
                container.innerHTML = '<p>No bookings found. Book your first pooja service!</p>';
                return;
            }

            container.innerHTML = bookings.map(booking => `
                <div class="poojari-card">
                    <h3>Booking #${booking.id}</h3>
                    <p><strong>Poojari:</strong> ${booking.poojariName || 'N/A'}</p>
                    <p><strong>Service:</strong> ${booking.serviceType}</p>
                    <p><strong>Date:</strong> ${booking.date}</p>
                    <p><strong>Time:</strong> ${booking.time}</p>
                    <p><strong>Status:</strong> <span style="color: ${getStatusColor(booking.status)}">${booking.status}</span></p>
                    <p><strong>Amount:</strong> ‚Çπ${booking.amount || 'TBD'}</p>
                </div>
            `).join('');
        }

        function getStatusColor(status) {
            switch(status) {
                case 'confirmed': return '#28a745';
                case 'pending': return '#ffc107';
                case 'completed': return '#17a2b8';
                case 'cancelled': return '#dc3545';
                default: return '#6c757d';
            }
        }

        async function loadProfile() {
            if (isGuestMode) {
                displayProfile(mockProfile);
                return;
            }

            if (!authToken) {
                displayProfile(mockProfile);
                showMessage('Login to view your actual profile', 'info');
                return;
            }

            try {
                const response = await fetch(`${API_BASE}/auth/profile`, {
                    headers: { 'Authorization': `Bearer ${authToken}` }
                });

                const data = await response.json();
                if (data.success) {
                    displayProfile(data.user);
                } else {
                    displayProfile(mockProfile);
                    showMessage('Using demo profile', 'info');
                }
            } catch (error) {
                displayProfile(mockProfile);
                showMessage('Using demo profile - Backend not available', 'info');
            }
        }

        async function loadReviews() {
            displayReviews(mockReviews);
            if (isGuestMode || !authToken) {
                showMessage('Login to manage your actual reviews', 'info');
            }
        }

        function displayProfile(user) {
            const container = document.getElementById('profile-container');
            container.innerHTML = `
                <div class="poojari-card">
                    <h3>Profile Information</h3>
                    <p><strong>Name:</strong> ${user.name || 'Not set'}</p>
                    <p><strong>Phone:</strong> ${user.phoneNumber}</p>
                    <p><strong>Email:</strong> ${user.email || 'Not set'}</p>
                    <p><strong>Member Since:</strong> ${new Date(user.createdAt).toLocaleDateString()}</p>
                    <p><strong>Total Bookings:</strong> ${user.totalBookings || 0}</p>
                    <p><strong>Membership:</strong> ${user.membershipType || 'Standard'}</p>
                </div>
            `;
        }

        function displayReviews(reviews) {
            const container = document.getElementById('reviews-container');
            if (reviews.length === 0) {
                container.innerHTML = '<p>No reviews yet. Book a service to leave your first review!</p>';
                return;
            }

            container.innerHTML = reviews.map(review => `
                <div class="poojari-card">
                    <h3>${review.poojariName}</h3>
                    <p><strong>Service:</strong> ${review.serviceType}</p>
                    <p><strong>Rating:</strong> ${'‚≠ê'.repeat(review.rating)} (${review.rating}/5)</p>
                    <p><strong>Review:</strong> "${review.comment}"</p>
                    <p><strong>Date:</strong> ${new Date(review.date).toLocaleDateString()}</p>
                </div>
            `).join('');
        }

        function openBookingModal(poojariId) {
            if (isGuestMode) {
                showMessage('Please login to book services', 'info');
                return;
            }
            
            selectedPoojari = poojariId;
            const modal = document.getElementById('booking-modal');
            modal.classList.remove('hidden');
            modal.style.display = 'flex';
            
            // Set default date to tomorrow
            const tomorrow = new Date();
            tomorrow.setDate(tomorrow.getDate() + 1);
            document.getElementById('booking-date').value = tomorrow.toISOString().split('T')[0];
            document.getElementById('booking-time').value = '10:00';
        }
    </script>
</body>
</html>
